<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slice Circle</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
</head>

<body>
    <script>
        let circle;
        let intersectionPoints = [];

        function setup() {
            createCanvas(600, 600);
            circle = {
                x: width / 2,
                y: height / 2,
                r: 100
            };
        }

        function draw() {
            background(220);

            ellipse(circle.x, circle.y, circle.r * 2, circle.r * 2);

            if (mouseIsPressed) {
                line(mouseX, mouseY, pmouseX, pmouseY);
                calculateIntersection(mouseX, mouseY, pmouseX, pmouseY);
            }

            for (let point of intersectionPoints) {
                fill(255, 0, 0);
                noStroke();
                ellipse(point.x, point.y, 10, 10);
            }
        }

        function calculateIntersection(x1, y1, x2, y2) {
            intersectionPoints = [];
            let a = y2 - y1;
            let b = x1 - x2;
            let c = x2 * y1 - y2 * x1;
            let d = abs(a * circle.x + b * circle.y + c) / sqrt(a * a + b * b);
            if (d < circle.r) {
                let delta = sqrt(circle.r * circle.r - d * d);
                let xCenter = circle.x - a * d / (a * a + b * b);
                let yCenter = circle.y - b * d / (a * a + b * b);
                let xi1 = xCenter + b * delta / (a * a + b * b);
                let yi1 = yCenter - a * delta / (a * a + b * b);
                let xi2 = xCenter - b * delta / (a * a + b * b);
                let yi2 = yCenter + a * delta / (a * a + b * b);
                intersectionPoints.push(createVector(xi1, yi1));
                intersectionPoints.push(createVector(xi2, yi2));
            }
        }
    </script>
</body>

</html>
